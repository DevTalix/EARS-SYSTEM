
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Intern Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f8f9fa;
    }

    /* Offcanvas sidebar custom width */
    .offcanvas-start {
      width: 250px;
    }

    /* Sidebar nav styles */
    .sidebar-nav .nav-link {
      color: #f8f9fa;
      font-size: 0.95rem;
      transition: background-color 0.2s, color 0.2s;
    }
    .sidebar-nav .nav-link:hover,
    .sidebar-nav .nav-link.active {
      background-color: #343a40;
      color: #f8f9fa;
    }
    .sidebar-nav i {
      margin-right: 8px;
    }

    /* Cards icon size */
    .card i {
      font-size: 2.5rem;
    }

    /* Notifications list spacing */
    .list-group-item {
      cursor: default;
    }

    /* Professional custom stats cards */
    .card-stat-primary {
      background-color: #2c3e50; /* dark slate blue */
      color: #ecf0f1; /* light gray */
    }
    .card-stat-warning {
      background-color: #d35400; /* dark orange */
      color: #fdf2e9; /* soft cream */
    }
    .card-stat-success {
      background-color: #27ae60; /* dark green */
      color: #dff0d8; /* pale green */
    }
    .card-stat-info {
      background-color: #2980b9; /* moderate blue */
      color: #dbe9f4; /* very light blue */
    }

    /* Icon color and spacing inside stats */
    .card-stat-primary i,
    .card-stat-warning i,
    .card-stat-success i,
    .card-stat-info i {
      font-size: 2.5rem;
      opacity: 0.85;
      margin-bottom: 0.3rem;
    }

    /* Card base style override */
    .card {
      border: none;
      border-radius: 0.5rem;
      box-shadow: 0 4px 8px rgb(0 0 0 / 0.1);
    }

    /* Content padding */
    .content {
      padding: 2rem 1rem;
      min-height: 100vh;
      transition: margin-left 0.3s ease;
    }

    /* Large screen: add left margin when sidebar is shown */
    @media (min-width: 992px) {
      .content.sidebar-open {
        margin-left: 250px;
      }
    }
  </style>
</head>
<body>

<!-- Navbar with hamburger -->
<nav class="navbar navbar-dark bg-dark">
  <div class="container-fluid">
    <button
      class="btn btn-dark"
      type="button"
      data-bs-toggle="offcanvas"
      data-bs-target="#sidebar"
      aria-controls="sidebar"
      aria-label="Toggle sidebar"
      id="sidebarToggleBtn"
    >
      <i class="bi bi-list fs-3"></i>
    </button>
    <span class="navbar-brand mb-0 h1 ms-3">Intern Dashboard</span>
  </div>
</nav>

<!-- Offcanvas sidebar -->
<div
  class="offcanvas offcanvas-start bg-dark text-white"
  tabindex="-1"
  id="sidebar"
  aria-labelledby="sidebarLabel"
>
  <div class="offcanvas-header border-bottom border-secondary">
    <h5 class="offcanvas-title fw-bold text-danger" id="sidebarLabel" style="letter-spacing: 1px;">
      EARS
    </h5>
    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body p-0">
    <nav class="nav flex-column sidebar-nav px-3">
      <a class="nav-link active d-flex align-items-center mb-2" href="InternDashboard.html">
        <i class="bi bi-house-door-fill"></i> Dashboard
      </a>
      <a class="nav-link d-flex align-items-center mb-2" href="SubmitReport.html">
        <i class="bi bi-journal-plus"></i> Submit Weekly Report
      </a>
      <a class="nav-link d-flex align-items-center mb-2" href="MyReports.html">
        <i class="bi bi-journal-text"></i> My Reports
      </a>
      <a class="nav-link d-flex align-items-center mb-2" href="Notifications.html">
        <i class="bi bi-bell"></i> Notifications
      </a>
      <a class="nav-link d-flex align-items-center mb-2" href="Profile.html">
        <i class="bi bi-person-circle"></i> Profile
      </a>
      <a class="nav-link text-white d-flex align-items-center mt-auto" href="#" id="logoutLink">
  <button onclick="logout()" class="btn btn-danger">Logout</button>
</a>
    </nav>
  </div>
</div>

<!-- Main content -->
<main class="content" id="mainContent">
  <h3 class="mb-4">Intern Dashboard</h3>
  <div class="mb-4">
    <h5>Welcome, Calvin Opio</h5>
    <p class="text-muted">Here is a quick overview of your reports and notifications.</p>
  </div>

  <div class="row g-3 mb-4">
    <div class="col-md-3 col-6">
      <div class="card card-stat-primary h-100 shadow-sm">
        <div class="card-body text-center">
          <i class="bi bi-journal-text"></i>
          <h4 class="card-title mt-2">0</h4>
          <p class="card-text">Total Submitted Reports</p>
        </div>
      </div>
    </div>
    <div class="col-md-3 col-6">
      <div class="card card-stat-warning h-100 shadow-sm">
        <div class="card-body text-center">
          <i class="bi bi-hourglass-split"></i>
          <h4 class="card-title mt-2">0</h4>
          <p class="card-text">Pending Approvals</p>
        </div>
      </div>
    </div>
    <div class="col-md-3 col-6">
      <div class="card card-stat-success h-100 shadow-sm">
        <div class="card-body text-center">
          <i class="bi bi-check2-square"></i>
          <h4 class="card-title mt-2">0</h4>
          <p class="card-text">Approved Reports</p>
        </div>
      </div>
    </div>
    <div class="col-md-3 col-6">
      <div class="card card-stat-info h-100 shadow-sm">
        <div class="card-body text-center">
          <i class="bi bi-calendar-check"></i>
          <h4 class="card-title mt-2">Week 3</h4>
          <p class="card-text">Last Approved Week</p>
        </div>
      </div>
    </div>
  </div>

  <div class="card shadow-sm">
    <div class="card-body">
      <h5 class="card-title mb-3">Recent Notifications</h5>
      <ul class="list-group">
        <li class="list-group-item d-flex align-items-center">
          <i class="bi bi-check2-circle text-success me-3 fs-4"></i>
          <div>
            <strong></strong>
            <div class="text-muted small"></div>
          </div>
        </li>
        <li class="list-group-item d-flex align-items-center">
          <i class="bi bi-chat-left-text text-primary me-3 fs-4"></i>
          <div>
            <strong></strong> 
            <div class="text-muted small"></div>
          </div>
        </li>
        <li class="list-group-item d-flex align-items-center">
          <i class="bi bi-exclamation-triangle text-warning me-3 fs-4"></i>
          <div>
            <strong></strong> 
            <div class="text-muted small">1 hour ago</div>
          </div>
        </li>
        <li class="list-group-item d-flex align-items-center">
          <i class="bi bi-journal-plus text-info me-3 fs-4"></i>
          <div>
            New weekly report template available
            <div class="text-muted small">Yesterday</div>
          </div>
        </li>
      </ul>
    </div>
  </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // Add margin-left to content when sidebar offcanvas is shown on large screens
  const sidebar = document.getElementById('sidebar');
  const mainContent = document.getElementById('mainContent');

  

  sidebar.addEventListener('show.bs.offcanvas', () => {
    if (window.innerWidth >= 992) {
      mainContent.classList.add('sidebar-open');
    }
  });

  sidebar.addEventListener('hide.bs.offcanvas', () => {
    mainContent.classList.remove('sidebar-open');
  });
  // Enhanced logout handler for supervisors
document.getElementById('logoutLink').addEventListener('click', function(e) {
    e.preventDefault();
    
    if (confirm('Are you sure you want to logout?')) {
        // 1. Call logout API
        fetch('/api/auth/logout', {
            method: 'POST',
            credentials: 'same-origin'
        })
        .then(response => {
            // 2. Clear client-side data
            localStorage.clear();
            sessionStorage.clear();
            
            // 3. Redirect to login
            window.location.href = '/login?logout=success';
        })
        .catch(error => {
            console.error('Logout error:', error);
            window.location.href = '/login'; // Force logout anyway
        });
    }
});
document.addEventListener('DOMContentLoaded', () => {
  const user = JSON.parse(sessionStorage.setItem('currentuser' , JSON.stringify(data.user)));
    if (!user || user.role !== 'intern') {
      window.location.href = '../login.html'; // adjust path if needed
    }
  });

  // Optional: handle window resize to remove margin if resizing smaller
  window.addEventListener('resize', () => {
    if (window.innerWidth < 992) {
      mainContent.classList.remove('sidebar-open');
    }
  });
  function logout() {
  sessionStorage.removeItem('currentUser');
  window.location.href = 'login.html';
}
if (currentUser.role !== 'intern') {
  alert('Unauthorized access');
  window.location.href = 'login.html';
}



</script>
</body>
</html>
